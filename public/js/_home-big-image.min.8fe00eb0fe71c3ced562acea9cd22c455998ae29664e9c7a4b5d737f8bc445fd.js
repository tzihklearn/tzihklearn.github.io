(()=>{function n(){t()}document.addEventListener("DOMContentLoaded",n),window.initHomeBigImage=n;function t(){const n=e("homeBigImageEnabled")==="true",t=e("homeBigImageMode")||"mode1";if(!n)return;s(),t==="mode1"?o():t==="mode2"&&i()}function s(){const n=e("homeBigImageMode1BackgroundImage"),i=e("homeBigImageMode2OverlayOpacity")||"0.3",t=e("siteBackgroundImage"),s=e("siteBackgroundEnabled")==="true",a=e("siteBackgroundBlur")||"0",r=e("siteBackgroundBrightness")||"100",c=e("siteBackgroundOpacity")||"80",l=e("homeBigImageMode2CustomBackgroundImage");n&&document.documentElement.style.setProperty("--home-big-image-mode1-bg",`url('${n}')`);let o=l;o?(document.documentElement.style.setProperty("--mode2-big-image-bg",`url('${o}')`),t&&s?document.documentElement.style.setProperty("--site-background-image",`url('${t}')`):document.documentElement.style.setProperty("--site-background-image","none")):t&&s?(document.documentElement.style.setProperty("--mode2-big-image-bg",`url('${t}')`),document.documentElement.style.setProperty("--site-background-image",`url('${t}')`)):(document.documentElement.style.setProperty("--mode2-big-image-bg","none"),document.documentElement.style.setProperty("--site-background-image","none")),document.documentElement.style.setProperty("--background-blur",`${a}px`),document.documentElement.style.setProperty("--background-brightness",`${r}%`),document.documentElement.style.setProperty("--background-opacity",`${c/100}`),document.documentElement.style.setProperty("--home-big-image-overlay-opacity",i);const d=e("homeBigImageMode1CardAnimationSpeed")||"normal",u={slow:"1.2s",normal:"0.8s",fast:"0.4s"};document.documentElement.style.setProperty("--card-animation-duration",u[d]||"0.8s")}function o(){const t=document.getElementById("homeBigImageMode1"),n=document.getElementById("homeContentMode1");if(!t||!n)return;const o=window.location.pathname!=="/"&&window.location.pathname!=="/index.html",i=sessionStorage.getItem("homeBigImageSwitched")==="true";let s=!1;const a=e("homeBigImageMode1CardAnimation")==="true";o||i?(s=!0,t.style.transition="none",n.style.transition="none",t.classList.remove("active"),n.classList.add("active"),t.offsetHeight):(s=!1,t.classList.add("active"),n.classList.remove("active"),document.body.classList.add("home-big-image-active")),t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),r()});function r(){s?l():c()}function c(){s=!0,t.classList.remove("active"),n.classList.add("active"),document.body.classList.remove("home-big-image-active"),sessionStorage.setItem("homeBigImageSwitched","true"),a&&setTimeout(()=>{d()},100)}function l(){s=!1,n.classList.remove("active"),t.classList.add("active"),document.body.classList.add("home-big-image-active"),sessionStorage.removeItem("homeBigImageSwitched")}function d(){const t=u(),e=[{x:-200,y:-200,rotate:-15},{x:0,y:-250,rotate:0},{x:200,y:-200,rotate:15},{x:-250,y:0,rotate:-20},{x:250,y:0,rotate:20},{x:-200,y:200,rotate:-10},{x:0,y:250,rotate:0},{x:200,y:200,rotate:10}],n=window.innerWidth/2,s=window.innerHeight/2;t.forEach((t,o)=>{t.style.opacity="0",t.style.transform="scale(0.8)",t.style.transition="none";const i=t.getBoundingClientRect(),r=i.left+i.width/2,c=i.top+i.height/2,l=o%e.length,a=e[l],m=r-n,f=c-s,d=a.x,u=a.y,h=a.rotate;t.style.transform=`translate(${d}px, ${u}px) rotate(${h}deg) scale(0.8)`,setTimeout(()=>{t.style.transition="all var(--card-animation-duration, 0.8s) cubic-bezier(0.4, 0, 0.2, 1)",t.style.opacity="1",t.style.transform="translate(0, 0) rotate(0deg) scale(1)"},o*80)})}function u(){const t=document.querySelectorAll(".home-content-mode1 .post-item, .home-content-mode1 .post-card, .home-content-mode1 .article-card, .home-content-mode1 .card"),e=[],n=window.innerHeight||document.documentElement.clientHeight;return t.forEach(t=>{const s=t.getBoundingClientRect();s.top<n&&s.bottom>0&&e.push(t)}),e}}function i(){const e=document.getElementById("homeBigImageMode2"),t=document.getElementById("homeContentMode2"),o=document.querySelector(".home-big-image-scroll-arrow");if(!e||!t)return;const r=window.location.pathname.includes("/page/")||window.location.pathname!=="/"&&window.location.pathname!=="/index.html",c=sessionStorage.getItem("homeBigImageSwitched")==="true",l=sessionStorage.getItem("pjaxToHomePage")==="true";let n=!1;if(r||c){n=!0,e.style.transition="none",t.style.transition="none",e.classList.add("scrolled"),t.classList.add("visible"),e.offsetHeight;return}l?(e.style.transition="none",t.style.transition="none",e.classList.remove("scrolled"),t.classList.remove("visible"),document.body.classList.add("home-big-image-active"),e.offsetHeight,requestAnimationFrame(()=>{e.style.transition="",t.style.transition=""})):(e.classList.remove("scrolled"),t.classList.remove("visible"),document.body.classList.add("home-big-image-active")),o&&o.addEventListener("click",function(){i()});let s=null;window.addEventListener("scroll",function(){s!==null&&clearTimeout(s),s=setTimeout(function(){d()},10)});function d(){const e=window.pageYOffset||document.documentElement.scrollTop;e>20&&!n&&i()}function i(){if(n)return;n=!0,e.classList.add("scrolled"),t.classList.add("visible"),sessionStorage.setItem("homeBigImageSwitched","true"),setTimeout(()=>{document.body.classList.remove("home-big-image-active")},800),window.scrollTo({top:0,behavior:"smooth"})}a()}function a(){const e=document.querySelector(".home-big-image-content");e&&document.addEventListener("mousemove",function(t){const n=t.clientX/window.innerWidth*100,s=t.clientY/window.innerHeight*100;e.style.transform=`translate(${n*.02}px, ${s*.02}px)`})}function e(e){return typeof window.siteConfig=="undefined"?null:window.siteConfig[e]}window.homeBigImageManager={switchMode:function(n){const s=e("homeBigImageMode");if(s===n)return;window.siteConfig&&(window.siteConfig.homeBigImageMode=n),t()},updateBackgroundImage:function(e){window.siteConfig&&(window.siteConfig.homeBigImageMode1BackgroundImage=e),document.documentElement.style.setProperty("--home-big-image-mode1-bg",`url('${e}')`)},updateContent:function(e,t){const n=document.querySelectorAll(".home-big-image-title"),s=document.querySelectorAll(".home-big-image-subtitle");n.forEach(t=>t.textContent=e),s.forEach(e=>e.textContent=t),window.siteConfig&&(window.siteConfig.homeBigImageTitle=e,window.siteConfig.homeBigImageSubtitle=t)},toggle:function(e){if(window.siteConfig&&(window.siteConfig.homeBigImageEnabled=e.toString()),e)t();else{const e=document.getElementById("homeBigImageMode1"),t=document.getElementById("homeBigImageMode2");e&&(e.style.display="none"),t&&(t.style.display="none")}}}})()